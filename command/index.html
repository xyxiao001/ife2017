<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>命令模式</title>
  </head>
  <body>
    <button id="btn1">按钮1</button>
    <button id="btn2">按钮2</button>
    <button id="btn3">按钮3</button>
    <p id="msg"></p>
    <script type="text/javascript">
      var btn1 = document.querySelector('#btn1')
      var btn2 = document.querySelector('#btn2')
      var btn3 = document.querySelector('#btn3')
      var msg = document.querySelector('#msg')

      var setComand = function (btn, command) {
        btn.addEventListener('click', function () {
          command.execute()
        })
      }

      var MenuBar = {
        refresh: function () {
          msg.innerHTML = '刷新菜单目录'
        }
      }

      var SubMenu = {
        add: function () {
          msg.innerHTML = '增加子菜单'
        },
        del: function () {
          msg.innerHTML = '删除子菜单'
        }
      }

      var RefreshMenuBarCommand= function (receiver) {
        this.receiver = receiver
      }

      RefreshMenuBarCommand.prototype.execute = function () {
        this.receiver.refresh()
      }

      var AddSubMenuCommand = function (receiver) {
        this.receiver = receiver
      }

      AddSubMenuCommand.prototype.execute = function () {
        this.receiver.add()
      }

      var DelSubMenuCommand = function (receiver) {
        this.receiver= receiver
      }

      DelSubMenuCommand.prototype.execute = function () {
        this.receiver.del()
      }

      var refreshMenuBarCommand = new RefreshMenuBarCommand(MenuBar)
      var addSubMenuCommand = new AddSubMenuCommand(SubMenu)
      var delSubMenuCommand = new DelSubMenuCommand(SubMenu)

      setComand(btn1, refreshMenuBarCommand)
      setComand(btn2, addSubMenuCommand)
      setComand(btn3, delSubMenuCommand)
    </script>
  </body>
</html>
